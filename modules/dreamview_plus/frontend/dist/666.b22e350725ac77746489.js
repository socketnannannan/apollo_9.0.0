"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[666],{60666:(e,t,r)=>{r.d(t,{Ay:()=>$,rh:()=>D,bv:()=>N,B3:()=>T,s$:()=>I,Sc:()=>w,O6:()=>j});var n=r(40366),o=r.n(n),i=r(23218),a=r(37165);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){var n;return n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==c(n)?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t,r,c=e.legends,u=e.onClick,p=(0,i.f2)((function(e){return{"legend-flex-container":{textAlign:"center",marginBottom:"-6px",marginTop:e.tokens.margin.speace2},"legend-container":{display:"inline-flex",flexWrap:"wrap",margin:"0 6px 0px ".concat(e.tokens.margin.speace2)},"legend-item":s(s({cursor:"pointer",display:"flex",alignItems:"center",userSelect:"none",color:e.tokens.colors.fontColor5},e.tokens.typography.sideText),{},{marginRight:"10px","& .anticon":{marginRight:"6px"}}),"legend-unactive":{position:"relative",color:e.tokens.colors.fontColor1,"& .anticon":{color:"".concat(e.tokens.colors.fontColor1," !important")},"&::after":{content:'""',position:"absolute",left:0,right:0,margin:"auto",height:"1px",background:e.tokens.colors.fontColor1}},"legend-icon":{}}}))(),m=p.classes,y=p.cx,b=(t=(0,n.useState)({}),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=b[0],g=b[1],d=(0,(0,i.wR)().useStyles)().theme;return(0,n.useEffect)((function(){var e={};c.forEach((function(t){var r=t.name;e[r]=!(r in v)||v[r]})),g(e)}),[c]),c.length<=1?null:o().createElement("div",{className:m["legend-flex-container"]},o().createElement("div",{className:m["legend-container"]},c.map((function(e,t){return o().createElement("div",{className:y(m["legend-item"],f({},m["legend-unactive"],!v[e.name])),onClick:function(){return t=e.name,g((function(e){return s(s({},e),{},f({},t,!e[t]))})),void u(t);var t},key:"".concat(e.name,"_").concat(t+1)},o().createElement(a.rb,{style:{color:e.color||d.components.pncMonitor.chartColors[t]}}),e.name)}))))}const m=o().memo(p);var y=r(53416),b=r(83517),v=r(52274),g=r.n(v);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==d(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=r(26256),S=r.n(O),j=o().createContext(null);function w(){var e=(0,n.useRef)({}),t=(0,n.useRef)({scrollElem:null}),r=(0,n.useRef)(),o=function(){var r=t.current.scrollElem;if(r){var n=r.scrollTop+r.offsetHeight,o=r.scrollTop;Object.keys(e.current).forEach((function(t){var i=e.current[t],a=i.elem,c=i.cb;if(a){var l=function(e,t){for(var r=0,n=e,o=e;;){var i=n.parentElement,a=getComputedStyle(i,null).getPropertyValue("position"),c="HTML"===i.tagName||i===t;if((["relative","absolute","fixed"].includes(a)||c)&&(r+=o.offsetTop,o=i),n=i,c)break}return r}(a,r);c(a.offsetHeight+l>o&&l<n)}else c(!1)}))}},i=(0,n.useCallback)(S()((function(e){t.current.scrollElem=e,e.addEventListener("scroll",(function(){o()})),r.current=new ResizeObserver((function(){o()})),r.current.observe(e)})),[]),a=(0,n.useCallback)((function(e){e&&i(e)}),[]),c=(0,n.useCallback)((function(t,r,n){return e.current[t]={elem:r,cb:n},o(),function(){delete e.current[t],o()}}),[]);return(0,n.useEffect)((function(){return function(){r.current.disconnect()}}),[]),(0,n.useMemo)((function(){return{onRef:a,contextValue:{regisitScrollEvent:c}}}),[a,c])}var k=r(75508);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=E(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==E(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R={dataZoom:[{type:"inside"}]},T=function(e){var t=e.xAxis,r=e.xAxisFormatter,n=e.yAxisFormatter,o=e.yAxis,i=e.dataset,a=e.series,c=e.scale,l=e.graphic,u=e.grid;return e.animation,A({graphic:l,grid:A({containLabel:!0,top:40,left:15,right:15,bottom:30},u||{}),xAxis:A(A({},t),{},{scale:!0,nameGap:t.nameGap||30,nameLocation:"middle",axisLine:{onZero:!1,lineStyle:{color:"#A6B5CC"}},splitLine:{show:!1},axisTick:{show:!0,lineStyle:{color:"#A6B5CC"}},axisLabel:A(A({},t.axisLabel||{}),{},{formatter:function(e){return r?r(e):e}})}),yAxis:A(A({},o),{},{scale:!0,axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#40454D"}},axisLabel:{formatter:function(e){return n?n(e):e}}}),dataset:i,series:a,animation:!1,legend:{show:!1,zLevel:2},textStyle:{color:"#808B9D"}},c?R:{})};function D(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!e)return[];var a={},c=e.map((function(e){return[e[t]+o,e[r]]}));return i&&(c=c.filter((function(e){var t,r,n=(t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(t,r)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return!a[n]&&(a[n]=!0,!0)}))),n&&e.length&&c.push([e[0][t],e[0][r]]),c}function N(e,t,r){if(!e||!t||e.length!==t.length)return[];for(var n=[],o=0;o<t.length;o+=1){var i=Number(e[o]),a=Number(t[o]);void 0!==r&&(a=r(a)),n.push([i,a])}return n}function I(e,t,r){if("timestampSec"===r)return t;var n=(e||[]).map((function(e){return e.timestampSec})),o=(e||[]).map((function(e){return e[r]}));return new k.LinearInterpolant(n,o,1,[]).evaluate(t)[0]}function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],l=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){var n,o,i,a;n=e,o=t,i=r[t],a=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o),(o="symbol"==L(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e){var t=e.onRefresh,r=e.onReset,n=e.yAxisName,c=e.onLegendClick,l=e.onCanvasRef,u=e.legends,s=e.title,f=e.autoHeight,p=e.titleExtra,y=e.className,b=e.onRef,v=(0,i.f2)((function(e){return{"moniter-item-container":{backgroundColor:e.components.pncMonitor.chartBgColor,color:e.tokens.colors.fontColor5,borderRadius:"6px"},"moniter-item-title":x(x({},e.tokens.typography.sideText),{},{lineHeight:"32px",textAlign:"center",borderRadius:"6px 6px 0px 0px",marginBottom:e.tokens.margin.speace2,position:"relative",backgroundColor:e.components.pncMonitor.chartTitleBgColor,borderBottom:e.components.pncMonitor.titleBorder}),"moniter-item-title-extra":{position:"absolute",top:0,bottom:0,right:"16px",display:"flex",alignItems:"center"},"moniter-item-chart-container":{width:"100%",height:"300px",position:"relative","&.autoHeight":{height:0,paddingBottom:"100%"}},"moniter-item-chart":{position:"absolute",left:0,top:0,right:0,bottom:0},"moniter-item-toolbox":{margin:"".concat(e.tokens.margin.speace," ").concat(e.tokens.margin.speace2," -23px ").concat(e.tokens.margin.speace2),display:"flex",justifyContent:"space-between"},"moniter-item-yaxis":{fontFamily:"PingFangSC-Regular",fontSize:"12px",color:"#808B9D"},"moniter-item-operate":{position:"relative",zIndex:2,display:"flex",alignItems:"center","& > .anticon":{cursor:"pointer",display:"block","&:hover":{color:e.tokens.font.reactive.mainHover},"&:active":{color:e.tokens.font.reactive.mainActive}}},"refresh-ic":{fontSize:e.tokens.font.size.large,marginLeft:e.tokens.margin.speace}}}))(),g=v.classes,d=v.cx;return o().createElement("div",{ref:b,className:d(g["moniter-item-container"],y||"")},o().createElement("div",{className:g["moniter-item-title"]},s||"-",o().createElement("div",{className:g["moniter-item-title-extra"]},p)),o().createElement(m,{legends:u,onClick:c}),o().createElement("div",{className:g["moniter-item-toolbox"]},o().createElement("span",{className:g["moniter-item-yaxis"]},n),o().createElement("div",{className:g["moniter-item-operate"]},o().createElement(a.AM,{trigger:"hover",content:"Clear view"},o().createElement(a.Tc,{onClick:r})),!!t&&o().createElement(a.AM,{trigger:"hover",content:"Refresh view"},o().createElement(a.H4,{onClick:t,className:g["refresh-ic"]})))),o().createElement("div",{className:d(g["moniter-item-chart-container"],{autoHeight:f})},o().createElement("div",{className:g["moniter-item-chart"],ref:l})))}var G=o().memo(F);function $(e){var t=(0,b.d)().onPanelResize,r=e.options,a=e.onRefresh,c=e.title,l=e.labelRotateBoundary,u=e.autoHeight,s=e.titleExtra,f=e.className,p=e.onClear,m=M((0,n.useState)(0),2),v=m[0],d=m[1],h=M((0,n.useState)(g().generate),1)[0],x=(0,n.useRef)(),O=M((0,n.useState)([]),2),S=O[0],w=O[1],k=(0,n.useRef)(),E=M((0,n.useState)(""),2),P=E[0],C=E[1],A=(0,n.useRef)(0),R=o().useContext(j),T=(0,n.useRef)(!0),D=(0,i.wR)().tokens,N=(0,n.useMemo)((function(){return S}),[JSON.stringify(S)]),I=(0,n.useCallback)((function(e){k.current.dispatchAction({type:"legendToggleSelect",name:e})}),[]);(0,n.useEffect)((function(){var e=setInterval((function(){x.current.clientWidth&&(k.current=y.Ts(x.current,null,{}),clearInterval(e))}),50);return t((function(e){var t;null===(t=k.current)||void 0===t||t.resize(),l&&(A.current=e<l?45:0,d((function(e){return e+1})))})),function(){var t;null===(t=k.current)||void 0===t||t.dispose(),clearInterval(e)}}),[]);var L=(0,n.useCallback)((function(){p?p():k.current.dispatchAction({type:"dataZoom",start:0,end:100})}),[]);(0,n.useEffect)((function(){if(r&&T.current){var e=H({},r);l&&function(e,t){H({},e);t?(e.xAxis.nameGap=70,e.xAxis.axisLabel.rotate=t):(e.xAxis.nameGap=30,e.xAxis.axisLabel.rotate=0)}(e,A.current),e.graphic&&function(e){try{e.graphic.forEach((function(e){if("polygon"===e.type)e.shape.points=e.shape.points.filter((function(e){return!!e})).map((function(e){var t;return null===(t=k.current)||void 0===t?void 0:t.convertToPixel({seriesIndex:0},e)})).filter((function(e){return!!e}));else if("text"===e.type){var t,r=null===(t=k.current)||void 0===t?void 0:t.convertToPixel({seriesIndex:0},[e.x,e.y]);r?(e.x=r[0],e.y=r[1]):e.style={}}}))}catch(e){}}(e),e.yAxis.name&&function(e){C(e.yAxis.name),delete e.yAxis.name}(e),function(e,t,r){e.tooltip={position:function(e,t,r,n,o){var i=o.viewSize[0]-o.contentSize[0],a=e[0];return[Math.max(Math.min(a,i),0),e[1]]},trigger:"axis",formatter:function(t){var n,o=null===(n=t[0].value)||void 0===n?void 0:n[0];return'<div style="font-weight: bold; font-size: 16px;">'.concat(o,"</div>")+t.reduce((function(t,n){var o,i,a=(null===(o=e.series[n.seriesIndex])||void 0===o||null===(o=o.lineStyle)||void 0===o?void 0:o.color)||e.series.color||r[n.seriesIndex],c='<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'.concat(a,';"></span>');return"".concat(t).concat(c," <span></span>").concat(n.seriesName,": ").concat((null===(i=n.value)||void 0===i?void 0:i[1])||"-","<br>")}),"")},padding:[10,16,10,16],backgroundColor:"rgba(255,255,255,0.21)",extraCssText:"box-shadow:  0px 6px 12px 2px rgba(0,0,0,0.1);backdrop-filter: blur(5px);",borderColor:"transparent",textStyle:{color:t}}}(e,D.components.pncMonitor.toolTipColor,D.components.pncMonitor.chartColors),function(e,t){e.color=t}(e,D.components.pncMonitor.chartColors),function(e){var t;k.current&&T.current&&(null===(t=k.current)||void 0===t||t.setOption(e,{replaceMerge:["dataset","graphic"]}))}(e),w((e.series||[]).map((function(e){var t;return{name:e.name,color:null===(t=e.lineStyle)||void 0===t?void 0:t.color}})))}}),[r,v,D]);var B=(0,n.useRef)({unDo:function(){return!1}}),z=(0,n.useCallback)((function(e){R&&(B.current.unDo=R.regisitScrollEvent(h,e,(function(e){T.current=e})))}),[]);return(0,n.useEffect)((function(){return function(){B.current.unDo()}}),[]),o().createElement(G,{onRef:z,autoHeight:u,onReset:L,onRefresh:a,onLegendClick:I,title:c,yAxisName:P,onCanvasRef:x,legends:N,titleExtra:s,className:f})}}}]);